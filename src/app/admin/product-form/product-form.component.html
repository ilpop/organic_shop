<!-- product-form.component.html -->

<form [formGroup]="productFormService.productForm" (ngSubmit)="save()">
  <div class="form-group">
    <div class="input-group-prepend">
      <span class="form-group-text fixed-width" id="title">Title</span>
    </div>
    <input id="title" type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" formControlName="title">
    <div *ngIf="productFormService.productForm.get('title').hasError('required') && productFormService.productForm.get('title').touched" class="text-danger">
      Title is required.
    </div>
  </div>

  <div class="form-group">
    <div class="form-group-prepend">
      <span class="form-group-text fixed-width">â‚¬</span>
    </div>
    <input type="number" id="price" class="form-control currency-input" step="0.10" aria-label="Amount (to the nearest dollar)" formControlName="price">
    <div *ngIf="productFormService.productForm.get('price').hasError('min') || productFormService.productForm.get('price').hasError('required') && productFormService.productForm.get('price').touched" class="text-danger">
      Price cannot be negative.
    </div>
  </div>

  <div class="form-group">
    <span class="form-group-text fixed-width">Category</span>
    <select id="category" class="form-control" formControlName="category">
      <option value=""></option>
      <option *ngFor="let c of productFormService.categories$ | async" >
        {{ c.name }}
      </option>
    </select>
    <div *ngIf="productFormService.productForm.get('category').hasError('required') && productFormService.productForm.get('category').touched" class="text-danger">
      Category is required.
    </div>
  </div>

  <div class="form-group">
    <div class="form-group-prepend">
      <span class="form-group-text fixed-width">Image URL</span>
    </div>
    <input id="imageUrl" type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" formControlName="imageUrl">
    <div *ngIf="productFormService.productForm.get('imageUrl').hasError('pattern') || productFormService.productForm.get('category').hasError('required') && productFormService.productForm.get('imageUrl').touched" class="text-danger">
      Invalid URL format.
    </div>
  </div>

  <button class="btn btn-primary">Save</button>
</form>

<div class="alert alert-success" *ngIf="productFormService.successMessage$ | async as successMessage">
  {{ successMessage }}
</div>

<div class="alert alert-danger" *ngIf="productFormService.errorMessage$ | async as errorMessage">
  {{ errorMessage }}
</div>
